import {describe, expect, it} from 'vitest';
import Blueprint from './Blueprint';

describe('Blueprint', () =>
{
	it('recognizes v14 strings', () =>
	{
		const blueprint = new Blueprint('H4sIAAAAAAAA/6WUwYqDMBCGX0U8J4ux7l5KLn2RktWhBNKJJCNYxHffqN3LNmrjngSZf+bPNz/T2MzYWpnsKgdA0qTBy2FAdQeZQ9868J771mgicDlrrQ8lFuXQSy4+PtlD8moc2VuCYrWenELfWkf8Gwz9GVNOotMRUZkmKhYNa7SDev5Zvug7bMDdnA3ftQ6nkdGjDRrbUdtRnmZcvFj4SjSxtPiXC3EAuThAfF5TsU18b2NF4kgR16xk/JlZkc6i2N7hLpYjKCM29wMrfpOiMRqUTTIRl2+kc2/kHttENiKOZvOsRdK/ddVC+ch0bXG6nl7fUBk5PN9IcM/ZSqsgCrj62d5SUnGyvMou4RXZRRmF9VR2dkCdw+x6Bmx+ACnKUf61BQAA');
		expect(blueprint.isV15()).toEqual(false);
	});

	it('recognizes v15 strings', () =>
	{
		const blueprint = new Blueprint('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');
		expect(blueprint.isV15()).toEqual(true);
	});

	it('recognizes v1.0 strings', () =>
	{
		const blueprint = new Blueprint('0eNqtkGFOhDAQhe8yv8tmq6VoD7EewBhSYDSN0JJ22EgId7eFkDVGVzT+nDfz3rx8E1TtgL03lsrKuVdQ00UJoB6nXxyknamdXeVgXqxuk0Zjj6DAEHbAwOouTc86UEZe29A7T1mFLcHMwNgG30Dx+YkBWjJkcI1bhrG0Q1ehjwdXgxj0LkSvs+l/yiuKQ85gBJVJfsjnFL/0UR/qMzijD4vp5o6LQtwXsuBHmctLseNXzmwhw6DV8XtcnDAQNlHQNZkzlpt33wP2V6T/QfNHkPJ2AylEBMmgMR7r9UJ8g3XjQpHLLsp8D+WHgWL3z5D5lfz5HTiI9uQ=');
		expect(blueprint.isV15()).toEqual(true);
	});

	it('does not recognize garbage strings', () =>
	{
		const blueprint = new Blueprint('garbage');
		expect(blueprint.isV15()).toEqual(false);
	});

	it('converts v15 objects', () =>
	{
		const blueprint = new Blueprint('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');
		(blueprint as any).convertEncodedTextToObject();
	});

	it('converts v1.0 objects', () =>
	{
		const blueprint = new Blueprint('0eNqtkGFOhDAQhe8yv8tmq6VoD7EewBhSYDSN0JJ22EgId7eFkDVGVzT+nDfz3rx8E1TtgL03lsrKuVdQ00UJoB6nXxyknamdXeVgXqxuk0Zjj6DAEHbAwOouTc86UEZe29A7T1mFLcHMwNgG30Dx+YkBWjJkcI1bhrG0Q1ehjwdXgxj0LkSvs+l/yiuKQ85gBJVJfsjnFL/0UR/qMzijD4vp5o6LQtwXsuBHmctLseNXzmwhw6DV8XtcnDAQNlHQNZkzlpt33wP2V6T/QfNHkPJ2AylEBMmgMR7r9UJ8g3XjQpHLLsp8D+WHgWL3z5D5lfz5HTiI9uQ=');
		(blueprint as any).convertEncodedTextToObject();
	});
});
